{
  "version": 3,
  "sources": ["../../../../src/lib/miner/miner/MinerManager.ts"],
  "sourcesContent": ["import type { Miner } from './Miner';\nimport type { MinerSettings } from '../model/MinerSettings';\nimport { createMiner } from './MinerFactory';\nimport { Logger } from '../model/Logger';\n\nconst logger = Logger.getLogger('MinerManager');\n\n/**\n *\n */\nexport class MinerManager {\n    private readonly miners: Miner<MinerSettings>[] = [];\n\n    /**\n     *\n     */\n    public async init(settings: MinerSettings): Promise<Miner<MinerSettings>> {\n        logger.info(`initializing miner with id ${settings.id}`);\n\n        const miner: Miner<MinerSettings> = createMiner(settings);\n        this.miners.push(miner);\n        await miner.init();\n        return miner;\n    }\n\n    /**\n     *\n     */\n    public async close(id: string): Promise<void> {\n        logger.info(`unloading miner with id ${id}`);\n\n        if (id == null) {\n            logger.error('id must be provided');\n            return;\n        }\n\n        const miner = this.getMinerById(id);\n        if (!miner) {\n            logger.error(`miner with id ${id} not found`);\n            return;\n        }\n\n        await miner.close();\n        this.miners.splice(this.miners.indexOf(miner), 1);\n    }\n\n    /**\n     *\n     */\n    public async closeAll(): Promise<void> {\n        logger.log('unloading all miners');\n\n        for (const miner of this.miners) {\n            await miner.close();\n        }\n        this.miners.splice(0, this.miners.length);\n    }\n\n    /**\n     *\n     */\n    public getMinerById(id: string): Miner<MinerSettings> | undefined {\n        return this.miners.find(miner => miner.settings.id === id);\n    }\n\n    /**\n     *\n     */\n    public hasMiner(id: string): boolean {\n        return this.getMinerById(id) != null;\n    }\n\n    /**\n     *\n     */\n    public async startMiner(id: string): Promise<void> {\n        logger.info(`starting miner with id ${id}`);\n\n        const miner = this.getMinerById(id);\n        if (!miner) {\n            throw new Error(`miner with id ${id} not found`);\n        }\n\n        await miner.start();\n    }\n\n    /**\n     *\n     */\n    public async stopMiner(id: string): Promise<void> {\n        logger.info(`stopping miner with id ${id}`);\n\n        const miner = this.getMinerById(id);\n        if (!miner) {\n            throw new Error(`miner with id ${id} not found`);\n        }\n\n        await miner.stop();\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,0BAA4B;AAC5B,oBAAuB;AAEvB,MAAM,SAAS,qBAAO,UAAU,cAAc;AAKvC,MAAM,aAAa;AAAA,EACL,SAAiC,CAAC;AAAA;AAAA;AAAA;AAAA,EAKnD,MAAa,KAAK,UAAwD;AACtE,WAAO,KAAK,8BAA8B,SAAS,EAAE,EAAE;AAEvD,UAAM,YAA8B,iCAAY,QAAQ;AACxD,SAAK,OAAO,KAAK,KAAK;AACtB,UAAM,MAAM,KAAK;AACjB,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAKA,MAAa,MAAM,IAA2B;AAC1C,WAAO,KAAK,2BAA2B,EAAE,EAAE;AAE3C,QAAI,MAAM,MAAM;AACZ,aAAO,MAAM,qBAAqB;AAClC;AAAA,IACJ;AAEA,UAAM,QAAQ,KAAK,aAAa,EAAE;AAClC,QAAI,CAAC,OAAO;AACR,aAAO,MAAM,iBAAiB,EAAE,YAAY;AAC5C;AAAA,IACJ;AAEA,UAAM,MAAM,MAAM;AAClB,SAAK,OAAO,OAAO,KAAK,OAAO,QAAQ,KAAK,GAAG,CAAC;AAAA,EACpD;AAAA;AAAA;AAAA;AAAA,EAKA,MAAa,WAA0B;AACnC,WAAO,IAAI,sBAAsB;AAEjC,eAAW,SAAS,KAAK,QAAQ;AAC7B,YAAM,MAAM,MAAM;AAAA,IACtB;AACA,SAAK,OAAO,OAAO,GAAG,KAAK,OAAO,MAAM;AAAA,EAC5C;AAAA;AAAA;AAAA;AAAA,EAKO,aAAa,IAA8C;AAC9D,WAAO,KAAK,OAAO,KAAK,WAAS,MAAM,SAAS,OAAO,EAAE;AAAA,EAC7D;AAAA;AAAA;AAAA;AAAA,EAKO,SAAS,IAAqB;AACjC,WAAO,KAAK,aAAa,EAAE,KAAK;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA,EAKA,MAAa,WAAW,IAA2B;AAC/C,WAAO,KAAK,0BAA0B,EAAE,EAAE;AAE1C,UAAM,QAAQ,KAAK,aAAa,EAAE;AAClC,QAAI,CAAC,OAAO;AACR,YAAM,IAAI,MAAM,iBAAiB,EAAE,YAAY;AAAA,IACnD;AAEA,UAAM,MAAM,MAAM;AAAA,EACtB;AAAA;AAAA;AAAA;AAAA,EAKA,MAAa,UAAU,IAA2B;AAC9C,WAAO,KAAK,0BAA0B,EAAE,EAAE;AAE1C,UAAM,QAAQ,KAAK,aAAa,EAAE;AAClC,QAAI,CAAC,OAAO;AACR,YAAM,IAAI,MAAM,iBAAiB,EAAE,YAAY;AAAA,IACnD;AAEA,UAAM,MAAM,KAAK;AAAA,EACrB;AACJ;",
  "names": []
}
