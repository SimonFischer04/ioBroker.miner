{
  "version": 3,
  "sources": ["../../../../src/lib/miner/miner/IceRiverOcMiner.ts"],
  "sourcesContent": ["import { PollingMiner } from './PollingMiner';\nimport type { IceRiverOcMinerSettings } from '../model/MinerSettings';\nimport { MinerFeatureKey } from '../model/MinerFeature';\nimport type { MinerStats } from '../model/MinerStats';\nimport { sendGenericHTTPRequest } from '../../utils/http-utils';\n\n// TODO: support more endpoints\nenum IceRiverOcEndpoint {\n    sleep = 'api/machine/sleep',\n    wake = 'api/machine/wake',\n    overview = 'api/overview',\n}\n\ninterface IceRiverOcResponse {\n    error: number;\n    message: string;\n    // TODO: add more fields\n}\n\n/**\n *\n */\nexport class IceRiverOcMiner extends PollingMiner<IceRiverOcMinerSettings> {\n    /**\n     *\n     */\n    public override async start(): Promise<void> {\n        await this.sendHTTPRequest(IceRiverOcEndpoint.wake, 'GET');\n    }\n\n    /**\n     *\n     */\n    public override async fetchStats(): Promise<MinerStats> {\n        const responseBody = await this.sendHTTPRequest(IceRiverOcEndpoint.overview, 'GET');\n\n        return {\n            raw: responseBody,\n        };\n    }\n\n    /**\n     *\n     */\n    public override async stop(): Promise<void> {\n        await this.sendHTTPRequest(IceRiverOcEndpoint.sleep, 'GET');\n    }\n\n    /**\n     *\n     */\n    public override getSupportedFeatures(): MinerFeatureKey[] {\n        return [MinerFeatureKey.running, MinerFeatureKey.rawStats];\n    }\n\n    /**\n     *\n     */\n    public override getLoggerName(): string {\n        return `${super.getLoggerName()}IceRiverOcMiner[${this.settings.host}:${this.settings.port}]`;\n    }\n\n    /**\n     *\n     */\n    public override getCliArgs(): string[] {\n        return [];\n    }\n\n    private async sendHTTPRequest(endpoint: string, httpMethod: string, body?: object): Promise<IceRiverOcResponse> {\n        return sendGenericHTTPRequest<IceRiverOcResponse>(\n            'https',\n            this.settings.host,\n            this.settings.port,\n            this.settings.password,\n            this.logger,\n            endpoint,\n            httpMethod,\n            body,\n        );\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA6B;AAE7B,0BAAgC;AAEhC,wBAAuC;AAGvC,IAAK,qBAAL,kBAAKA,wBAAL;AACI,EAAAA,oBAAA,WAAQ;AACR,EAAAA,oBAAA,UAAO;AACP,EAAAA,oBAAA,cAAW;AAHV,SAAAA;AAAA,GAAA;AAeE,MAAM,wBAAwB,iCAAsC;AAAA;AAAA;AAAA;AAAA,EAIvE,MAAsB,QAAuB;AACzC,UAAM,KAAK,gBAAgB,+BAAyB,KAAK;AAAA,EAC7D;AAAA;AAAA;AAAA;AAAA,EAKA,MAAsB,aAAkC;AACpD,UAAM,eAAe,MAAM,KAAK,gBAAgB,+BAA6B,KAAK;AAElF,WAAO;AAAA,MACH,KAAK;AAAA,IACT;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,MAAsB,OAAsB;AACxC,UAAM,KAAK,gBAAgB,iCAA0B,KAAK;AAAA,EAC9D;AAAA;AAAA;AAAA;AAAA,EAKgB,uBAA0C;AACtD,WAAO,CAAC,oCAAgB,SAAS,oCAAgB,QAAQ;AAAA,EAC7D;AAAA;AAAA;AAAA;AAAA,EAKgB,gBAAwB;AACpC,WAAO,GAAG,MAAM,cAAc,CAAC,mBAAmB,KAAK,SAAS,IAAI,IAAI,KAAK,SAAS,IAAI;AAAA,EAC9F;AAAA;AAAA;AAAA;AAAA,EAKgB,aAAuB;AACnC,WAAO,CAAC;AAAA,EACZ;AAAA,EAEA,MAAc,gBAAgB,UAAkB,YAAoB,MAA4C;AAC5G,eAAO;AAAA,MACH;AAAA,MACA,KAAK,SAAS;AAAA,MACd,KAAK,SAAS;AAAA,MACd,KAAK,SAAS;AAAA,MACd,KAAK;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAAA,EACJ;AACJ;",
  "names": ["IceRiverOcEndpoint"]
}
